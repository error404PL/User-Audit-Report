@using Sitecore.Mvc
@using Sitecore.Mvc.Presentation
@using Sitecore.Web.UI.Controls.Common.UserControls

@model RenderingModel
@{
    var rendering = Html.Sitecore().Controls().GetUserControl(Model.Rendering);
    rendering.Class = "sc-listcontrol sc-UserAuditList";
    rendering.Requires.Script("client", "UserAuditList.js");

    rendering.GetString("userlist", "userlist");

    var htmlAttributes = rendering.HtmlAttributes;
}
<div @htmlAttributes>

    <!-- data binding with knockout js https://cmsview.wordpress.com/2015/11/05/sitecore-speak-for-beginners-part-9-getting-data-for-custom-component/-->
    <div>
        <table class="sc-table sc-table-header table">
            <thead>
                <tr>
                    <th class="sc-table-head">User</th>
                    <th class="sc-table-head">Changes</th>
                </tr>
            </thead>
        </table>
        <div class="sc-listcontrol-body">
            <table class="sc-table table">
                <tbody data-bind="foreach: userlist">
                    <tr>
                        <td class="ventilate">
                            <span data-bind="text:UserName"></span>
                        </td>
                        <td class="ventilate">
                            <span>TODO total number of changes?</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan=2>
                            <ul data-bind="foreach: ChangedItems" style="list-style-type: none;">
                                <li>
                                    Item: <span data-bind="text:ItemPath"></span>

                                    <ul data-bind="foreach: Changes" style="list-style-type: none;">
                                        <li>
                                            Date: <span data-bind="text:Date"></span>

                                            <ul data-bind="foreach: ChangedFields" style="list-style-type: none;">
                                                <li>
                                                    <div>Field: <span data-bind="text:FieldName"></span></div>
                                                    <div>Old value: <span data-bind="text:OldValue"></span></div>
                                                    <div>New value: <span data-bind="text:NewValue"></span></div>
                                                </li>
                                            </ul>

                                        </li>
                                    </ul>

                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>


</div>
